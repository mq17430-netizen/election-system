function loadMonitorsFromFirestore() {
    if (!currentUserName) return;

    db.collection('monitors')
      .where('adminUsername', '==', currentUserName)
      .get()
      .then((snapshot) => {
          const loaded = [];
          snapshot.forEach((doc) => {
              const data = doc.data();
              loaded.push({
                  id:       doc.id,
                  name:     data.monitorName  || '',
                  phone:    data.monitorPhone || '',
                  center:   data.monitorCenter|| '',
                  code:     data.code || data.monitorCode || '',
                  arrived:  !!data.arrived,
                  voted:    !!data.voted,
                  hasIssue: !!data.hasIssue,
                  issueText: data.issueText || '',
                  online:   !!data.online,
                  location: data.location || null   // ⬅️ هذا السطر الجديد
              });
          });
          monitors = loaded;
          saveMonitors();
          renderMonitors(document.getElementById('searchInput').value);
      })
      .catch((err) => {
          console.error("خطأ في جلب المراقبين من Firestore:", err);
      });
}
